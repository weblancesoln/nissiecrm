{% extends "base.html" %}
{% block title %}{{ lead.full_name }} - Nissie Ideal Shelters CRM{% endblock %}
{% block content %}
<div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center flex-wrap gap-2 mb-4">
    <h1 class="h4 mb-0">
        {% if lead.color_code %}<span class="color-pill me-2" style="background: {{ lead.color_code }}"></span>{% endif %}
        {{ lead.full_name }}
    </h1>
    <div class="d-flex flex-wrap gap-2">
        <a href="{% url 'leads:lead_edit' lead.pk %}" class="btn btn-primary btn-sm"><i class="bi bi-pencil"></i> Edit</a>
        <a href="{% url 'leads:lead_delete' lead.pk %}" class="btn btn-outline-danger btn-sm"><i class="bi bi-trash"></i> Delete</a>
        <a href="{% url 'leads:lead_list' %}" class="btn btn-outline-secondary btn-sm">Back</a>
    </div>
</div>
<div class="row">
    <div class="col-lg-8">
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title border-bottom pb-2">Contact Information</h5>
                <table class="table table-borderless mb-0">
                    <tr><td class="text-muted" style="width: 180px">Phone</td><td>{{ lead.phone_number|default:"—" }}</td></tr>
                    <tr><td class="text-muted">Email</td><td>{{ lead.email|default:"—" }}</td></tr>
                    <tr><td class="text-muted">Point of Contact</td><td>{{ lead.point_of_contact|default:"—" }}</td></tr>
                    <tr><td class="text-muted">Source</td><td>{{ lead.source|default:"—" }}</td></tr>
                </table>
            </div>
        </div>
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title border-bottom pb-2">Prospect Response</h5>
                <p class="mb-0">{{ lead.prospect_response|default:"No response recorded."|linebreaks }}</p>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <h5 class="card-title border-bottom pb-2">Remarks</h5>
                <p class="mb-0">{{ lead.remarks|default:"No remarks."|linebreaks }}</p>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title border-bottom pb-2">Status</h5>
                <p><span class="badge bg-light text-dark fs-6">{{ lead.get_status_display }}</span></p>
                {% if lead.color_code %}
                <p><span class="color-pill me-2" style="background: {{ lead.color_code }}"></span>{{ lead.get_color_code_display }}</p>
                {% endif %}
                <p class="mb-0"><strong>Assigned Staff:</strong> {{ lead.assigned_to.username|default:"—" }}</p>
                <hr>
                <p class="small text-muted mb-0">
                    Created: {{ lead.created_at|date:"M d, Y H:i" }}<br>
                    Updated: {{ lead.updated_at|date:"M d, Y H:i" }}
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
